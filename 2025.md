# 服务器维护2025新变化版本
###  1.本文件以外的其他内容仍适用

### 2.服务器状态：

  ——单卡4090运行较为稳定，如有必要也可同时搭载双卡。单卡为24G显存。
  
  ——内存条插有两张32G DDR5 内存条，单张运行也可

  ——CPU为i9 13900k 、 主板 proart DDR5 wifi版 、电源2000W （单张GPU额定450W cpu253W，2000W可保证双卡稳定运行）

  ——系统目前为ubuntu 22.04，cuda版本12.6，环境管理使用miniconda以及anaconda

  ——通用账号kunyu。

### 3.服务器维护情况最新进展：

  服务器自二五年三月初起，或因环境、显卡驱动冲突问题目前只能进入命令行控制界面，但并不影响远程连接与深度学习的显卡使用，受限部分为浏览器的使用等。进入该状态后服务稳定性反而增加，故未作维修。
  
  2025年3月27日，返修机械硬盘返还。预计近期重装系统（目前硬盘只有2G 搭载机械硬盘后共计18G），重装系统后使用个人单独账号方式进一步隔离环境避免环境混乱。

  对服务器宕机的情况分析，夜晚实验很少发生宕机，宕机多发生于白天时段（因此推断为缺电）



### 4.服务器连接：

在本项目的其他文件中描述了公网服务器+FRP远程连接方法，该方法目前可用。维护简便，成本较低。用户通过公网ip访问服务器。

本文描述另一种方法：tailscale组网方法，用户设备下载tailscale软件，通过分享设备链接加入组网，该应用可通过github账号登录，维护简便，无成本。每个用户通过自己的组网内ip连接服务器（服务器已经安装tailscale，同样使用个人账户，目前使用的连接方法为非同一组网内分享，不同用户之间不能互相访问，单个用户的内部组网的设备可相互访问）



### 5.服务器异常：服务器在购买以及返厂维修后均在一定条件下发生如下异常。

  ——掉卡，服务器宕机，显卡风扇高速旋转，声音骤增，显示屏无输出或卡死，键盘鼠标无反应。推测原因包含多种问题，可能为缺电、高温、软硬件问题。

  ——CPU内核异常：服务器部分功能异常，如输入设备无反应，但显卡仍在运转，发生该异常后一定时间内会宕机，一般发生在cpu内核负载过高的情况。

  ——段错误，与运行程序和环境关系较大，应检查环境是否合理，与内存、cpu内核问题有关。

对于良好的使用，最长可约10天无异常使用。以上异常的发生与服务器硬件、软件环境均有关系，若进行相同实验时反复发生宕机，应排查代码与环境本身问题。

常用指令： 

nvidia-smi   打开显卡占用，

top          任务管理器，查看cpu与内存占用

ps aux        查看当前运行的进程

ps aux| grep xxx   在当前进程中查找xxx （如查找含python进程 ps aux| grep python，基于字符串匹配会返回任何含有python字段的进程）

kill -9 10000     杀死进程10000，10000为pid可通过上述命令查看。 -9 为强制，对于非顽固进程可省略。

sensors 查看机箱内传感器信息，如温度电压等，也可后加grep进行字符串查找。


### 未来维护可参考资料：

https://www.bilibili.com/video/BV1pK421878r/?vd_source=5b1acb8205060bb1fd371bdc517c6161

https://blog.csdn.net/j6UL6lQ4vA97XlM/article/details/131485392

https://blog.csdn.net/weixin_43311658/article/details/127837471?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522c11e6f00a138327e1c231f0500b91811%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=c11e6f00a138327e1c231f0500b91811&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-127837471-null-null.142^v102^pc_search_result_base6&utm_term=4090gpu%E9%A3%8E%E6%89%87%E7%8B%82%E8%BD%AC%20%E9%BB%91%E5%B1%8F&spm=1018.2226.3001.4187








